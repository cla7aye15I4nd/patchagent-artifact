diff --git a/src/vm.c b/src/vm.c
index 77edbb38f..3bb9510ec 100644
--- a/src/vm.c
+++ b/src/vm.c
@@ -1749,7 +1749,7 @@ RETRY_TRY_BLOCK:
       }
       else if (target_class->tt == MRB_TT_MODULE) {
         target_class = mrb_vm_ci_target_class(ci);
-        if (target_class->tt != MRB_TT_ICLASS) {
+        if (!target_class || target_class->tt != MRB_TT_ICLASS) {
           goto super_typeerror;
         }
       }